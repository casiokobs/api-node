<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
<form id="form">
    <label for="name">name</label><br>
    <input type="text" id="name" name="name"><br>
    <button type="submit">Submit</button>
</form>

<table class="table table-dark table-bordered">
    <tr>
      <th>Task</th>
      <th>Date</th>
      <th>User</th>
    </tr>
    <tbody id="table-content">
    </tbody>
  </table>

<script>
/*
//Funciona com outras apis, nessa ele cai no erro
    const form = document.getElementById("form");

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        const prePayload = new FormData(form);
        const payload = new URLSearchParams(prePayload);

        console.log([...payload]);

        fetch('http://localhost:3000/user', {
            method: 'POST',
            body: payload,
        })
        .then(res => res.json())
        .then(data => console.log(data))
        .catch(err => console.log(err))
    })
    */


    //populando tabela de tasks, usuario mostra o id ao inves do nome
     fetch("http://localhost:3000/task").then(resposta=>{
        return resposta.json();
    }).then(body =>{
        let tableData = "";
        body.map((values)=>{
            tableData += `  <tr>
                                <td>${values.description}</td>
                                <td>${values.date}</td>
                                <td>${values.user}</td>
                            </tr>`
        });
        document.getElementById("table-content").innerHTML = tableData;
    }).catch(err =>{
        console.log(err)
    })    
    
</script>